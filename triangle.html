<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triangle Fraternity Master Tool</title>
    <style>
        :root {
            /* --- Dark Mode Palette --- */
            --triangle-rose: #d63333; 
            --triangle-gray: #adb5bd;
            --bg: #121212; 
            --card-bg: #1e1e1e; 
            --text: #e0e0e0;
            --text-muted: #6c757d;
            --border: #333333;
            
            --success: #2ea043;
            --fail: #da3633;
            --streak-gold: #ffd700;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            max-width: 550px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            flex-grow: 1; 
        }

        /* === HEADER & LOGO === */
        header { text-align: center; margin-bottom: 15px; }

        .logo-area {
            height: 90px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
        }

        .crest-img {
            max-height: 100%;
            width: auto;
            filter: drop-shadow(0 0 8px rgba(214, 51, 51, 0.2)); 
        }
        
        .img-placeholder {
            color: var(--text-muted); font-size: 0.8rem; border: 1px dashed var(--border); padding: 10px; display: none;
        }

        h1 {
            color: var(--triangle-rose);
            margin: 0;
            font-size: 1.6rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 800;
        }

        /* === PROGRESS BAR === */
        .stats-bar {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--triangle-gray);
            margin-top: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .progress-container {
            width: 100%;
            height: 8px;
            background-color: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 25px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--triangle-rose), var(--success));
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* === FLASHCARD === */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
            border-top: 4px solid var(--triangle-rose);
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            border: 1px solid var(--border);
        }

        .badges-container {
            display: flex;
            justify-content: space-between;
            position: absolute;
            top: 12px;
            left: 15px;
            right: 15px;
        }

        .badge {
            background: rgba(255,255,255,0.05);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
            text-transform: uppercase;
            font-weight: bold;
            color: var(--triangle-gray);
            letter-spacing: 0.5px;
            border: 1px solid var(--border);
        }
        
        .streak-count { color: var(--streak-gold); }

        .question {
            font-size: 1.3rem;
            font-weight: 700;
            margin: 25px 0 20px 0;
            line-height: 1.4;
            color: var(--text);
        }

        /* === OPTIONS === */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        @media (min-width: 500px) {
            .options-grid { grid-template-columns: 1fr 1fr; }
        }

        button.option-btn {
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 18px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            color: var(--text);
            font-weight: 600;
            text-align: center;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        button.option-btn:hover {
            border-color: var(--triangle-gray);
            background-color: rgba(255,255,255,0.03);
            transform: translateY(-2px);
        }

        button.option-btn.correct {
            background-color: rgba(46, 160, 67, 0.2) !important; 
            border-color: var(--success) !important;
            color: var(--success) !important;
        }

        button.option-btn.wrong {
            background-color: rgba(218, 54, 51, 0.2) !important; 
            border-color: var(--fail) !important;
            color: var(--fail) !important;
            opacity: 0.7;
        }

        /* === CONTROLS & FOOTER === */
        .controls-area {
            min-height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
        }

        .next-btn {
            background: linear-gradient(135deg, var(--triangle-rose), #a32222);
            color: white;
            border: none;
            padding: 14px 40px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            display: none; 
            box-shadow: 0 4px 15px rgba(214, 51, 51, 0.4);
            transition: all 0.2s;
        }
        .next-btn:hover { 
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 6px 20px rgba(214, 51, 51, 0.6);
        }

        #feedback {
            text-align: center;
            font-weight: bold;
            min-height: 25px;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .footer-reset {
            margin-top: auto;
            padding-top: 40px;
            text-align: center;
        }
        .reset-link {
            font-size: 0.75rem;
            color: var(--border); 
            text-decoration: none;
            cursor: pointer;
            padding: 10px;
            border-radius: 4px;
            transition: color 0.3s;
        }
        .reset-link:hover {
            color: var(--fail); 
            text-decoration: underline;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="logo-area">
            <img src="Triangle_Fraternity_Crest.png" alt="Triangle Crest" class="crest-img" onerror="this.style.display='none'; document.querySelector('.img-placeholder').style.display='block';">
            <div class="img-placeholder">‚ö†Ô∏è Place "Triangle_Fraternity_Crest.png" in the same folder.</div>
        </div>
        <h1>Triangle Trainer</h1>
        <div class="stats-bar">
            <span>Brain Progress</span>
            <span id="progressText">0%</span>
        </div>
        <div class="progress-container">
            <div class="progress-fill" id="progressBar"></div>
        </div>
    </header>

    <div class="card">
        <div class="badges-container">
             <div class="badge">Streak: <span id="currentStreak" class="streak-count">0</span>/10</div>
             <div class="badge" id="categoryBadge">Loading...</div>
        </div>
       
        <div class="question" id="questionDisplay">Initializing Smart Brain...</div>
    </div>

    <div id="feedback"></div>

    <div class="options-grid" id="optionsGrid">
        </div>

    <div class="controls-area">
        <button class="next-btn" id="nextBtn">Continue</button>
    </div>
</div>

<div class="footer-reset">
    <span class="reset-link" onclick="resetProgress()">Reset Brain Memory (DANGER)</span>
</div>

<script>
    // ================= DATA INPUTS =================
    
    // 1. FACTS
    const facts = [
        { q: "What are the House Colors?", a: "Old rose and gray", cat: "Facts" },
        { q: "What is the House Flower?", a: "The white Chrysanthemum", cat: "Facts" },
        { q: "What is the Triangle Motto?", a: "Veritas Omnia Vincit", cat: "Facts" },
        { q: "Translate 'Veritas Omnia Vincit'", a: "Truth Conquers All", cat: "Facts" },
        { q: "When and where was Triangle founded?", a: "April 15, 1907 at Univ of Illinois", cat: "Facts" },
        { q: "Who founded Triangle?", a: "16 Civil Engineering Students", cat: "Facts" },
        { q: "When was the PSU Chapter founded?", a: "March 3rd, 1928", cat: "Facts" },
        { q: "Who is the House Mom?", a: "Taylor", cat: "Facts" },
        { q: "Who are the Sweethearts?", a: "Priya, Navya, Isabelle", cat: "Facts" },
        { q: "In 'Everyman', what does God represent?", a: "The Unknown", cat: "Facts" },
        { q: "What is the moral of 'Everyman'?", a: "Only good deeds stay with you when you die", cat: "Facts" },
        { q: "What is Tee Grizzley's real name?", a: "Terry Sanchez Wallace Jr.", cat: "Facts" },
        { q: "Where did Tee Grizzley go to school?", a: "Michigan State", cat: "Facts" }
    ];

    // 2. ETHICS (Full Text Breakdown)
    const ethics = [
        { q: "Ethics: 'Observe the precepts of the Fraternity as set forth in the...'", a: "Ritual", cat: "Ethics" },
        { q: "Ethics: 'Accept cheerfully my full share of any task, however menial, involved in...'", a: "maintaining a chapter home", cat: "Ethics" },
        { q: "Ethics: 'Preserve and promote the...'", a: "chosen ideals of my Fraternity", cat: "Ethics" },
        { q: "Ethics: 'Pay all personal bills promptly, and always live...'", a: "within my means", cat: "Ethics" },
        { q: "Ethics: 'Help create in my chapter home an environment in which...'", a: "enduring friendships may be formed", cat: "Ethics" },
        { q: "Ethics: 'Maintain a creditable...'", a: "scholastic record", cat: "Ethics" },
        { q: "Ethics: 'Promote the welfare of my...'", a: "profession", cat: "Ethics" },
        { q: "Ethics: 'Maintain my self-respect by proper...'", a: "conduct at all times", cat: "Ethics" },
        { q: "Ethics: 'Uphold faithfully the traditions and program of my...'", a: "Alma Mater", cat: "Ethics" },
        { q: "Ethics: 'Pay the price of success in...'", a: "honest effort", cat: "Ethics" }
    ];

    // 3. GREEK ALPHABET (Full 24 + Orders)
    const greekList = [
        "Alpha", "Beta", "Gamma", "Delta", "Epsilon", "Zeta", "Eta", "Theta", 
        "Iota", "Kappa", "Lambda", "Mu", "Nu", "Xi", "Omicron", "Pi", 
        "Rho", "Sigma", "Tau", "Upsilon", "Phi", "Chi", "Psi", "Omega"
    ];
    
    const greekSymbols = [
        "Œë", "Œí", "Œì", "Œî", "Œï", "Œñ", "Œó", "Œò", 
        "Œô", "Œö", "Œõ", "Œú", "Œù", "Œû", "Œü", "Œ†", 
        "Œ°", "Œ£", "Œ§", "Œ•", "Œ¶", "Œß", "Œ®", "Œ©"
    ];

    // 4. PEOPLE
    const people = [
        // Pledges
        { name: "Gavin Hoover", major: "Industrial Eng", town: "Philly", role: "Pledge", fact: "", type: "Pledge" },
        { name: "Justin Hnat", major: "Mechanical Eng", town: "Philly", role: "Pledge", fact: "", type: "Pledge" },
        { name: "Aditya Phophaliya", major: "CS and AI", town: "NYC", role: "Pledge", fact: "", type: "Pledge" },
        { name: "Thomas Youssef", major: "Electrical Eng", town: "Dubai, UAE", role: "Pledge", fact: "", type: "Pledge" },
        { name: "Augie Esposito", major: "Architectural Eng", town: "Philly", role: "Pledge", fact: "", type: "Pledge" },
        { name: "Kory Lafferty", major: "Aerospace Eng", town: "Cape May, NJ", role: "Pledge", fact: "", type: "Pledge" },
        { name: "Finn Bracken", major: "Computer Eng", town: "Medford, NJ", role: "Pledge", fact: "", type: "Pledge" },
        { name: "Kerlos Rafayel", major: "Electrical Eng", town: "Whitehall, PA", role: "Pledge", fact: "", type: "Pledge" },
        { name: "Lucas Walthour", major: "Aerospace Eng", town: "Marriottsville, MD", role: "Pledge", fact: "", type: "Pledge" },
        { name: "Joshua Staley", major: "Chem E / Astro", town: "Yorktown, VA", role: "Pledge", fact: "", type: "Pledge" },
        { name: "Thomas Askharoun", major: "Electrical Eng", town: "Cairo, Egypt", role: "Pledge", fact: "", type: "Pledge" },

        // Brothers
        { name: "Justin Quinn", major: "Mechanical Eng", town: "Broomall, PA", role: "President", type: "Brother" },
        { name: "Mason Truban", major: "Aerospace Eng", town: "Middletown, DE", role: "VPM", type: "Brother" },
        { name: "Bobby Kosslow", major: "Aerospace Eng", town: "Pittsburgh, PA", role: "VPHM", type: "Brother" },
        { name: "Max Lick", major: "Data Science", town: "Scranton, PA", role: "VP Thon", type: "Brother" },
        { name: "Hunter Orlofski", major: "Aerospace Eng", town: "Lehman, PA", role: "VPS", type: "Brother" },
        { name: "Will Meyer", major: "Computer Eng", town: "Albany, NY", role: "VPA", type: "Brother" },
        { name: "Grant Benson", major: "Aerospace Eng", town: "Springfield, VA", role: "VPX", type: "Brother" },
        { name: "James Tritto", major: "Forestry/Poli Sci", town: "Seaside Heights, NJ", role: "", type: "Brother" },
        { name: "Spencer Rothka", major: "Aerospace Eng", town: "Hernden, VA", role: "", type: "Brother" },
        { name: "Jack Mussoline", major: "Computer Eng", town: "Irving, CA", role: "", type: "Brother" },
        { name: "Thomas Israel", major: "Aerospace Eng", town: "Asheville, NC", role: "", type: "Brother" },
        { name: "Jack Boyle", major: "Civil Eng", town: "Morgantown, WV", role: "", type: "Brother" },
        { name: "Niko Rylott", major: "Kinesiology", town: "Newcastle, PA", role: "", type: "Brother" },
        { name: "Jay Palla", major: "Computer Eng", town: "Garnet Valley, PA", role: "", type: "Brother" },
        { name: "Andrew Griesacker", major: "Aerospace Eng", town: "Moon Township, PA", role: "", type: "Brother" },
        { name: "Thomas Rohan", major: "Nuclear Eng", town: "Scranton, PA", role: "", type: "Brother" },
        { name: "Matthew Avery", major: "Electrical Eng", town: "Emerson, NJ", role: "", type: "Brother" },
        { name: "Kourosh Sadr", major: "Nuclear Eng", town: "San Diego, CA", role: "", type: "Brother" },
        { name: "Ryan Maietta", major: "Electrical Eng", town: "Lititz, PA", role: "", type: "Brother" },
        { name: "Josh McQuilken", major: "Science BSHP", town: "New Tripoli, PA", role: "", type: "Brother" },
        { name: "Ishaan Nrangg", major: "Computer Science", town: "Chandigarh, India", role: "", type: "Brother" },
        { name: "Michael Nornthrop", major: "Industrial Eng", town: "Interboro, PA", role: "", type: "Brother" },
        { name: "Misha Goldberg", major: "Nuclear Eng", town: "San Francisco, CA", role: "", type: "Brother" },
        { name: "Derek Shephard", major: "Ag Systems Mgmt", town: "Camden, NJ", role: "", fact: "Runs with gangs", type: "Brother" },
        { name: "Noah Greep", major: "Mechanical Eng", town: "Uniontown, PA", role: "", type: "Brother" },
        { name: "Josh Hassenau", major: "Enviro Systems Eng", town: "Greenville, SC", role: "", type: "Brother" },
        { name: "Lucas Shawley", major: "Civil Eng", town: "Spring Hills, PA", role: "", type: "Brother" },
        { name: "Sam Mattis", major: "HPA", town: "West Chester, PA", role: "", type: "Brother" },
        { name: "Colton Middaugh", major: "CS", town: "Dillsburg, PA", role: "", type: "Brother" },
        { name: "Logan Taylor", major: "CS", town: "Dillsburg, PA", role: "", type: "Brother" },
        { name: "Joshua Levin", major: "Aerospace Eng", town: "White Plains, NY", role: "", type: "Brother" },
        { name: "Tyler Gilbert", major: "Aerospace Eng", town: "Mountoursville, PA", role: "", type: "Brother" },
        { name: "Eugene Kaz", major: "Aerospace Eng", town: "Grodno, Belarus", role: "", type: "Brother" },
        { name: "Athan Ozmen", major: "Mechanical Eng", town: "Turkey", role: "", type: "Brother" },
        { name: "Siddarth Jayakrishnan", major: "Mat Sci", town: "Pittsburgh, PA", role: "", type: "Brother" },
        { name: "Deniz Kiraz", major: "Unknown", town: "Istanbul, Turkey", role: "", type: "Brother" },
        { name: "Nick Smith", major: "Biomedical Eng", town: "Perkasie, PA", role: "", type: "Brother" }
    ];

    // ================= LOGIC =================
    let db = [];
    const MASTERY_THRESHOLD = 10;

    function initDB() {
        // Facts
        facts.forEach((f, i) => db.push({ id: `f_${i}`, q: f.q, a: f.a, cat: f.cat }));
        
        // Ethics
        ethics.forEach((e, i) => db.push({ id: `e_${i}`, q: e.q, a: e.a, cat: e.cat }));
        
        // Greek (Symbols & Order)
        greekList.forEach((name, i) => {
            const sym = greekSymbols[i];
            // Name -> Symbol
            db.push({ id: `g_sym_${i}`, q: `What is the symbol for ${name}?`, a: sym, cat: "Greek" });
            // Order
            db.push({ id: `g_ord_${i}`, q: `What is the ${ordinal(i+1)} Greek letter?`, a: name, cat: "Greek Order" });
        });

        // People
        people.forEach((p, i) => {
            db.push({ id: `p_${i}_maj`, q: `What is ${p.name}'s Major?`, a: p.major, cat: p.type });
            db.push({ id: `p_${i}_town`, q: `Where is ${p.name} from?`, a: p.town, cat: p.type });
            if(p.role && p.role !== "Pledge" && p.role !== "") {
                db.push({ id: `p_${i}_role`, q: `Who is the ${p.role}?`, a: p.name, cat: "Leadership" });
            }
            if(p.fact) {
                db.push({ id: `p_${i}_fact`, q: `Fact: "${p.fact}"`, a: p.name, cat: "Fact" });
            }
        });

        // Load Saves
        const saved = JSON.parse(localStorage.getItem('triangle_stats_v3')) || {};
        db.forEach(card => {
            card.streak = saved[card.id] || 0;
        });
    }

    // Helper for "1st", "2nd", "3rd"
    function ordinal(n) {
        const s = ["th", "st", "nd", "rd"];
        const v = n % 100;
        return n + (s[(v - 20) % 10] || s[v] || s[0]);
    }

    let currentCard = null;

    function saveStats() {
        const stats = {};
        db.forEach(c => stats[c.id] = c.streak);
        localStorage.setItem('triangle_stats_v3', JSON.stringify(stats));
        updateProgress();
    }

    function updateProgress() {
        const total = db.length;
        const mastered = db.filter(c => c.streak >= MASTERY_THRESHOLD).length;
        const pct = Math.floor((mastered / total) * 100);
        document.getElementById('progressBar').style.width = `${pct}%`;
        document.getElementById('progressText').innerText = `${pct}%`;
    }

    function getDistractors(card) {
        let pool = [];
        
        // Context aware distractors
        if (card.cat === "Facts") pool = facts.map(f => f.a);
        else if (card.cat === "Ethics") pool = ethics.map(e => e.a);
        else if (card.cat === "Greek") pool = greekSymbols;
        else if (card.cat === "Greek Order") pool = greekList;
        else if (card.cat === "Leadership") pool = people.map(p => p.name);
        else if (card.q.includes("Major")) pool = people.map(p => p.major);
        else if (card.q.includes("Where")) pool = people.map(p => p.town);
        else pool = people.map(p => p.name);

        // Filter duplicates and current answer
        pool = [...new Set(pool)].filter(opt => opt !== card.a && opt !== "" && opt !== "Unknown");
        pool.sort(() => 0.5 - Math.random());
        
        let options = [card.a, ...pool.slice(0, 3)];
        return options.sort(() => 0.5 - Math.random());
    }

    function nextQuestion() {
        document.getElementById('nextBtn').style.display = 'none';
        document.getElementById('feedback').innerText = '';
        document.getElementById('optionsGrid').innerHTML = '';

        let candidates = db.filter(c => c.streak < MASTERY_THRESHOLD);
        if(candidates.length === 0) {
            candidates = db; // Review mode
            document.getElementById('questionDisplay').innerText = "üéâ All Mastered! Entering Review Mode.";
        }

        // Random pick
        currentCard = candidates[Math.floor(Math.random() * candidates.length)];

        document.getElementById('categoryBadge').innerText = currentCard.cat;
        document.getElementById('currentStreak').innerText = currentCard.streak;
        document.getElementById('questionDisplay').innerText = currentCard.q;

        const opts = getDistractors(currentCard);
        const grid = document.getElementById('optionsGrid');
        
        opts.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => handleAnswer(btn, opt);
            grid.appendChild(btn);
        });
    }

    function handleAnswer(btn, selected) {
        const isCorrect = selected === currentCard.a;
        const btns = document.querySelectorAll('.option-btn');
        btns.forEach(b => b.onclick = null);

        if(isCorrect) {
            btn.classList.add('correct');
            currentCard.streak++;
            document.getElementById('feedback').innerText = "‚úÖ Correct! Streak +1";
            document.getElementById('feedback').style.color = "var(--success)";
        } else {
            btn.classList.add('wrong');
            currentCard.streak = 0;
            document.getElementById('feedback').innerText = "‚ùå Wrong! Streak reset to 0.";
            document.getElementById('feedback').style.color = "var(--fail)";
            btns.forEach(b => {
                if(b.innerText === currentCard.a) b.classList.add('correct');
            });
        }

        saveStats();
        document.getElementById('nextBtn').style.display = 'inline-block';
        document.getElementById('nextBtn').onclick = nextQuestion;
    }

    function resetProgress() {
        if(confirm("Are you sure? This will wipe all your streak data and cannot be undone.")) {
            localStorage.removeItem('triangle_stats_v3');
            location.reload();
        }
    }

    // Init
    initDB();
    updateProgress();
    nextQuestion();

</script>
</body>
</html>
