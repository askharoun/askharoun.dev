<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PixelPaste - Interactive Demo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #000000;
      --primary: #0071e3;
      --text: #f5f5f7;
    }

    body {
      margin: 0; padding: 0;
      background: var(--bg);
      overflow: hidden;
      font-family: 'Inter', sans-serif;
      height: 100vh; display: flex; align-items: center; justify-content: center;
      color: var(--text);
      cursor: default; /* Real mouse is back */
    }

    /* --- STAGE --- */
    #stage {
      width: 1920px; height: 1080px;
      position: relative;
      background: #000;
      overflow: hidden;
      box-shadow: 0 0 100px rgba(0,0,0,0.8);
    }

    /* --- START BUTTON --- */
    #startOverlay {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: #000; z-index: 9999;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      transition: opacity 0.8s ease;
    }
    #startOverlay.hidden { opacity: 0; pointer-events: none; }
    
    .play-btn {
      background: transparent; color: var(--text); 
      border: 1px solid rgba(255,255,255,0.3);
      padding: 15px 40px; font-size: 18px; font-weight: 500;
      border-radius: 30px; cursor: pointer; transition: 0.3s;
    }
    .play-btn:hover { border-color: var(--text); background: rgba(255,255,255,0.1); }

    /* --- TEXT ANIMATIONS --- */
    .intro-text-container {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      pointer-events: none; z-index: 50;
    }
    .hero-word {
      font-size: 120px; font-weight: 700; letter-spacing: -2px;
      opacity: 0; transform: translateY(40px);
      position: absolute;
      background: linear-gradient(180deg, #fff, #888);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      transition: 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .hero-word.visible { opacity: 1; transform: translateY(0); }
    .hero-word.out { opacity: 0; transform: translateY(-40px); transition: 0.5s ease-in; }

    /* --- BACKGROUND UI --- */
    .browser-layer {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: #0d0d0d;
      opacity: 0; transition: opacity 1.5s ease;
      display: flex; justify-content: center; align-items: center;
    }
    .abstract-site {
      width: 1400px; height: 900px;
      background: #000; border-radius: 20px; border: 1px solid #222;
      box-shadow: 0 40px 100px rgba(0,0,0,0.5);
      position: relative; overflow: hidden;
    }
    .nav-bar { height: 60px; border-bottom: 1px solid #222; display: flex; align-items: center; padding: 0 30px; }
    .nav-dots { display: flex; gap: 8px; }
    .dot { width: 12px; height: 12px; border-radius: 50%; background: #333; }
    .site-hero { margin-top: 100px; padding: 0 80px; }
    .bar-long { width: 60%; height: 60px; background: #1a1a1a; border-radius: 12px; margin-bottom: 20px; }
    .bar-short { width: 40%; height: 20px; background: #1a1a1a; border-radius: 6px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; padding: 80px; }
    .card { height: 200px; background: #111; border-radius: 16px; border: 1px solid #222; }

    /* --- POPUP --- */
    .popup {
      position: absolute; top: 120px; right: 280px;
      width: 360px;
      background: rgba(28, 28, 30, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px; padding: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      opacity: 0; transform: translateY(20px);
      transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
      z-index: 10;
      display: flex; flex-direction: column; gap: 16px;
    }
    .popup.active { opacity: 1; transform: translateY(0); }
    .popup-header { font-size: 14px; font-weight: 600; color: #86868b; text-align: center; letter-spacing: 1px; margin-bottom: 8px; }
    
    .dropzone {
      height: 100px; border: 1px dashed #444; border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      color: #666; font-size: 14px; font-weight: 500;
      transition: 0.3s; background: rgba(0,0,0,0.2);
    }
    .dropzone.active { border-color: var(--primary); background: rgba(0, 113, 227, 0.1); color: var(--primary); }

    .input-row { position: relative; height: 44px; }
    .input-field {
      width: 100%; height: 100%; background: #2c2c2e; border: none; border-radius: 8px;
      padding: 0 12px; color: white; font-size: 15px; font-family: 'Inter'; box-sizing: border-box;
      transition: box-shadow 0.2s;
    }
    .input-field:focus { outline: none; box-shadow: 0 0 0 2px var(--primary); }
    .input-label {
      position: absolute; left: 12px; top: 50%; transform: translateY(-50%);
      color: #86868b; font-size: 14px; pointer-events: none; transition: 0.2s;
    }
    .input-row.filled .input-label { opacity: 0; }

    .actions-row { display: flex; gap: 12px; }
    .btn-main {
      flex: 1; height: 40px; background: var(--primary); color: white;
      border: none; border-radius: 8px; font-weight: 600; font-size: 14px;
      cursor: default; transition: 0.2s; opacity: 0.5; /* Disabled look initially */
    }
    .btn-main.ready { cursor: pointer; opacity: 1; }
    .btn-main.success { background: #30d158; }

    .btn-icon {
      width: 40px; height: 40px; background: #2c2c2e; border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      color: #86868b; border: none; transition: 0.2s; cursor: default;
    }
    .btn-icon.ready { cursor: pointer; color: white; }
    .btn-icon.active { background: #3a3a3c; color: white; }

    /* --- PIP WINDOW --- */
    .pip-window {
      position: absolute; top: 0; left: 0;
      width: 300px; height: auto;
      background: #000; border: 1px solid #333;
      border-radius: 12px;
      box-shadow: 0 30px 80px rgba(0,0,0,0.8);
      z-index: 20; overflow: hidden;
      opacity: 0; transform: scale(0.9);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }
    .pip-window.visible { opacity: 1; transform: scale(1); cursor: move; }
    .pip-header { height: 24px; background: rgba(255,255,255,0.1); display: flex; align-items: center; padding-left: 8px; }
    .pip-close { width: 10px; height: 10px; background: #ff453a; border-radius: 50%; }
    .pip-img { width: 100%; display: block; pointer-events: none; }

    /* --- OUTRO --- */
    .outro-container {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      pointer-events: none; opacity: 0; transition: opacity 1s; z-index: 60;
      background: #000;
    }
    .outro-logo { display: flex; align-items: center; gap: 8px; margin-top: 30px; }
    .powered-text { color: #86868b; font-size: 24px; font-weight: 500; }
    .dev-link { color: var(--primary); font-weight: 600; font-size: 24px; }

    /* --- INTERACTIVE PULSE ANIMATION --- */
    @keyframes pulse-border {
      0% { box-shadow: 0 0 0 0 rgba(0, 113, 227, 0.7); border-color: var(--primary); }
      70% { box-shadow: 0 0 0 10px rgba(0, 113, 227, 0); border-color: var(--primary); }
      100% { box-shadow: 0 0 0 0 rgba(0, 113, 227, 0); border-color: #444; }
    }
    .awaiting-click { animation: pulse-border 2s infinite; cursor: pointer; }

  </style>
</head>
<body>

  <div id="startOverlay">
    <button class="play-btn" onclick="startPresentation()">Start Presentation</button>
  </div>

  <div id="stage">

    <div class="intro-text-container">
      <div class="hero-word" id="text1">Capture.</div>
      <div class="hero-word" id="text2">Rename.</div>
      <div class="hero-word" id="text3">Organize.</div>
      <div class="hero-word" id="text4" style="color:var(--primary); -webkit-text-fill-color: var(--primary); background:none;">PixelPaste.</div>
    </div>

    <div class="browser-layer" id="browserLayer">
      <div class="abstract-site">
        <div class="nav-bar">
          <div class="nav-dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
        </div>
        <div class="site-hero">
          <div class="bar-long"></div>
          <div class="bar-short"></div>
        </div>
        <div class="grid">
          <div class="card"></div>
          <div class="card"></div>
          <div class="card"></div>
        </div>
      </div>
    </div>

    <div class="popup" id="popup">
      <div class="popup-header">PIXELPASTE</div>
      
      <div class="dropzone" id="dz" onclick="triggerPaste()">
        <span id="dzText">Paste or Drop</span>
        <img id="dzImg" src="https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=600&auto=format&fit=crop" style="display:none; width:100%; height:100%; object-fit:cover; border-radius:6px;">
      </div>
      
      <div class="input-row" id="inputRow">
        <input type="text" class="input-field" id="nameInput" onclick="triggerType()" readonly>
        <span class="input-label">Filename</span>
      </div>

      <div class="actions-row">
        <button class="btn-main" id="btnSave" onclick="triggerSave()">Save</button>
        <button class="btn-icon" id="btnPip" onclick="triggerPip()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
        </button>
      </div>
    </div>

    <div class="pip-window" id="pipWin" style="left: 1400px; top: 300px;">
      <div class="pip-header"><div class="pip-close"></div></div>
      <img src="https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=600&auto=format&fit=crop" class="pip-img">
    </div>

    <div class="outro-container" id="outro">
      <div class="hero-word visible" style="position:relative;">PixelPaste.</div>
      <div class="outro-logo">
        <span class="powered-text">Powered by</span>
        <span class="dev-link">askharoun.dev</span>
      </div>
    </div>

  </div>

  <script>
    const stage = document.getElementById('stage');
    
    // --- UTILS ---
    function fitStage() {
      const scale = Math.min(window.innerWidth/1920, window.innerHeight/1080);
      stage.style.transform = `scale(${scale})`;
      stage.style.transformOrigin = 'center center';
    }
    window.onresize = fitStage;
    fitStage();

    const sleep = (ms) => new Promise(r => setTimeout(r, ms));
    
    // State Tracking
    let step = 0; // 0=Intro, 1=Paste, 2=Rename, 3=Save, 4=PiP, 5=Drag

    // --- MAIN FLOW ---
    async function startPresentation() {
      document.getElementById('startOverlay').classList.add('hidden');
      await sleep(500);

      // Text Intro
      const showText = async (id) => {
        const el = document.getElementById(id);
        el.classList.add('visible');
        await sleep(800);
        el.classList.remove('visible');
        el.classList.add('out');
        await sleep(300);
      };

      await showText('text1');
      await showText('text2');
      await showText('text3');
      
      const t4 = document.getElementById('text4');
      t4.classList.add('visible');
      await sleep(1500);
      t4.classList.remove('visible');
      t4.classList.add('out');

      // Show UI
      document.getElementById('browserLayer').style.opacity = "1";
      await sleep(800);
      document.getElementById('popup').classList.add('active');
      
      // Enable Step 1: Paste
      step = 1;
      document.getElementById('dz').classList.add('awaiting-click');
    }

    // --- INTERACTIVE TRIGGERS ---

    function triggerPaste() {
      if(step !== 1) return;
      const dz = document.getElementById('dz');
      dz.classList.remove('awaiting-click');
      
      // Animation
      dz.classList.add('active');
      document.getElementById('dzText').style.display = 'none';
      document.getElementById('dzImg').style.display = 'block';
      
      step = 2;
      // Enable Input Pulse
      document.getElementById('nameInput').classList.add('awaiting-click');
    }

    async function triggerType() {
      if(step !== 2) return;
      const input = document.getElementById('nameInput');
      input.classList.remove('awaiting-click');
      
      document.getElementById('inputRow').classList.add('filled');
      const text = "final_render_v2";
      for(let char of text) {
        input.value += char;
        await sleep(40);
      }

      step = 3;
      const btn = document.getElementById('btnSave');
      btn.classList.add('ready'); // Visual change
      btn.classList.add('awaiting-click'); // Pulse
    }

    async function triggerSave() {
      if(step !== 3) return;
      const btn = document.getElementById('btnSave');
      btn.classList.remove('awaiting-click');
      
      btn.classList.add('success');
      btn.innerText = "Saved";

      await sleep(500);
      step = 4;
      const pip = document.getElementById('btnPip');
      pip.classList.add('ready');
      pip.classList.add('awaiting-click');
    }

    async function triggerPip() {
      if(step !== 4) return;
      const pip = document.getElementById('btnPip');
      pip.classList.remove('awaiting-click');
      
      // Transition
      document.getElementById('popup').classList.remove('active');
      await sleep(300);
      document.getElementById('pipWin').classList.add('visible');

      step = 5; // Drag mode enabled
      setupDrag();
      
      // Auto-trigger outro after 8 seconds of "playing around"
      setTimeout(triggerOutro, 8000);
    }

    function triggerOutro() {
      document.getElementById('browserLayer').style.opacity = "0.1";
      document.getElementById('pipWin').style.opacity = "0";
      document.getElementById('outro').style.opacity = "1";
    }

    // --- REAL DRAG LOGIC ---
    function setupDrag() {
      const el = document.getElementById('pipWin');
      let isDragging = false;
      let startX, startY, initialLeft, initialTop;

      el.addEventListener('mousedown', (e) => {
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        initialLeft = el.offsetLeft;
        initialTop = el.offsetTop;
        el.style.transition = 'none'; // Disable transition for instant drag
      });

      window.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        const dx = e.clientX - startX;
        const dy = e.clientY - startY;
        el.style.left = `${initialLeft + dx}px`;
        el.style.top = `${initialTop + dy}px`;
      });

      window.addEventListener('mouseup', () => {
        if(isDragging) {
          isDragging = false;
          el.style.transition = 'transform 0.4s ease'; // Re-enable for scale effect
        }
      });
    }

  </script>
</body>
</html>